{
  "id": "common",
  "definitions": {
    "owner": {
      "type": "string",
      "minLength": 1,
      "maxLength": 50
    },
    "uuid-v4": {
      "type": "string",
      "pattern": "^[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-4[0-9A-Fa-f]{3}-[89ABab][0-9A-Fa-f]{3}-[0-9A-Fa-f]{12}$"
    },
    "filename": {
      "type": "string",
      "pattern": "^[0-9A-Fa-f]{32}\/[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-4[0-9A-Fa-f]{3}-[89ABab][0-9A-Fa-f]{3}-[0-9A-Fa-f]{12}\/[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-4[0-9A-Fa-f]{3}-[89ABab][0-9A-Fa-f]{3}-[0-9A-Fa-f]{12}"
    },
    "tag": {
      "type": "string",
      "pattern": "^[^,]{1,20}$"
    },
    "tags": {
      "type": "array",
      "uniqueItems": true,
      "maxItems": 20,
      "items": {
        "$ref": "#/definitions/tag"
      }
    },
    "name": {
      "type": "string",
      "minLength": 1,
      "maxLength": 75
    },
    "description": {
      "type": "string",
      "minLength": 1,
      "maxLength": 2000
    },
    "website": {
      "type": "string",
      "format": "uri"
    },
    "controlsData": {
      "type": "array",
      "minItems": 29,
      "maxItems": 29,
      "items": {
        "type": "number"
      }
    },
    "backgroundImage": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "uploadId": {
          "$ref": "common#/definitions/uuid-v4"
        },
        "username": {
          "$ref": "common#/definitions/owner"
        },
        "filename": {
          "$ref": "common#/definitions/filename"
        },
        "contentType": {
          "type": "string",
          "enum": ["image/jpeg", "image/png"]
        },
        "contentLength": {
          "type": "integer",
          "minimum": 1,
          "maximum": 20000000
        },
        "url": {
          "type": "string",
          "format": "uri"
        }
      }
    },
    "type": {
      "type": "string",
      "enum": [
        "default",
        "object",
        "dslr",
        "human",
        "user"
      ]
    },
    "color": {
      "type": "string",
      "pattern": "^(#(?:[\\dA-Fa-f]{3}){1,2}|rgb\\((?:\\d{1,3},\\s*){2}\\d{1,3}\\))$"
    },
    "export": {
      "type": "object",
      "required": ["format", "compression"],
      "properties": {
        "format": {
          "type": "string",
          "enum": ["stl", "obj", "wrl"]
        },
        "compression": {
          "type": "string",
          "enum": ["zip", "gz"]
        },
        "meta": {
          "type": "object",
          "patternProperties": {
            "^.+$": {
              "anyOf": [{
                "type": "string"
              }, {
                "type": "number"
              }, {
                "type": "array",
                "items": {
                  "oneOf": [{
                    "type": "string"
                  }, {
                    "type": "number"
                  }]
                }
              }]
            }
          }
        }
      }
    }
  }
}
